---
layout: post
related_posts:
  - allposts/unity/_posts/2021-01-07-Timeline-01.md
  - allposts/unity/_posts/2021-01-08-Timeline-03.md
title: 타임라인🎬 02 - 트랙과 클립
tags: [unity, c#, timeline]
image: /assets/img/blog/unity/2021/Timeline/Banner_02.png
description: >
  애니메이션 및 튜토리얼 제작에 유용한 유니티 타임라인에 대해 알아본다.  
  두번째 포스팅에서는 트랙과 클립을 다루는 방법을 애니메이션 트랙 하나로 설명한다.
comments: true
---

첫번째 포스팅에서는 타임라인을 만들고, 실행시키는 방법을 설명했다.  
이번 포스팅에서는 트랙을 생성하고, 클립을 사용하는 방법을 알아본다.

* this unordered seed list will be replaced by toc as unordered list
{:toc}

# 개요
타임라인에는 여러 트랙의 종류가 존재하고, 또 커스텀 트랙을 생성시킬 수 있는 만큼 사용법 또한 다양하기 때문에 대표적으로 사용되는 애니메이션 트랙 한 가지에 대해서만 서술한다. 여기에 쓰인 내용은 대부분 다른 트랙에서도 적용 가능한 방법이므로 직접 타임라인 트랙을 만져가며 글을 읽는 것이 좋다.

# 🤹‍♀️ 애니메이션 트랙 만들기
우선 애니메이션 트랙을 만들어야만 타임라인에서 애니메이션을 제어할 수 있다.  
아래의 단계에 따라 애니메이션 트랙을 생성할 수 있다.

1. 타임라인에 [Animation Track] 추가
2. 오브젝트에 [Animator] 컴포넌트 추가
3. 애니메이터를 붙인 오브젝트를 애니메이션 트랙 좌측에 [Binding]

### ⛔ 주의
[Animator Controller]가 애니메이터에 등록되면 타임라인에 있는 클립과 컨트롤러의 클립이 중복된다.

![01](/assets/img/blog/unity/2021/Timeline/02_AnimationTrack/01.png)

따라서 컨트롤러에서 클립을 지우거나, 클립이 있는 컨트롤러를 사용하고 싶다면 타임라인에서의 애니메이션 트랙을 사용하지 않는 것을 권장한다.

# 📎 애니메이션 클립 등록하기
타임라인에서 애니메이션 클립을 사용하는 방법은 크게 두가지가 있다.

## 방법1. 이미 존재하는 애니메이션 클립의 활용
이미 애니메이션 클립이 존재하는 캐릭터의 움직임같은 경우에는 간단하게 제어할 수 있다.

1. 프로젝트 파일에서 클립을 선택
2. 원하는 애니메이션 트랙에 Drag&Drop

애니메이션이 클립형태로 바로 트랙에 등록된다.  
타임라인을 플레이해보면 캐릭터가 움직이는 모습을 확인할 수 있다.

⛔ 여기서 캐릭터의 위치가 (0, 0, 0)으로 바뀌는 이슈가 생길 수 있는데 애니메이션에서의 설정 문제로 인해 발생하는 이슈이다. 이 이슈에 대한 설명은 다음 포스팅에서 볼 수 있다.
{:.message}

[🔧 애니메이션 오프셋 설정](/allposts/unity/Timeline-03)

## 방법2. 타임라인에서 애니메이션을 생성
이 방법은 주로 단순히 오브젝트의 Transform을 변형시킬 때 많이 사용한다.

![02](/assets/img/blog/unity/2021/Timeline/02_AnimationTrack/02.png)

애니메이션 트랙 자체에서 붉은 버튼을 누르고, 바인딩되어 있는 오브젝트 또는 하위에 있는 오브젝트가 변형되면 애니메이션 클립이 타임라인 하위에 자동 생성된다.

1. 빨간 동그라미 버튼 클릭 → Recording 시작
2. 원하는 타임라인에 인디케이터(하얀선)을 배치하고 바인딩 되어 있는 오브젝트 또는 하위의 오브젝트를 수정
3. 키프레임이 잘 찍혔는지 확인
4. 원하는 동작을 완성할때까지 2~3을 반복 작업
5. 원하는 동작을 마쳤다면, 다시 빨간 동그라미를 눌러 Recording을 멈춤

⛔ 이렇게 자동 생성된 애니메이션 클립은 타임라인을 삭제하면 함께 삭제되므로 주의가 필요하다.  
{:.message}

### 클립 트랙으로 변환
아무런 애니메이션 클립이 등록되어 있지 않은 트랙에서 애니메이션을 생성하면 애니메이션 트랙에 키프레임이 찍힌 형태로 보인다. 이러한 애니메이션 트랙을 [Infinite Clip] 트랙이라고 한다. Infinite Clip 트랙의 경우 첫번째 키프레임부터 마지막 키프레임까지가 하나의 클립으로 취급된다. 하지만 이런 상태로는 애니메이션의 길이 조절을 하려면 키프레임을 잡고 직접 길이를 늘여야하는 수고가 들고, 혹은 다른 애니메이션 클립과 블렌딩을 할 수 없는 등 다른 추가적인 작업이 어렵다.

따라서 키프레임으로 존재하는 Infinite Clip 트랙을 [Clip Track]으로 변환해서 사용하는 것이 좋다.

![03](/assets/img/blog/unity/2021/Timeline/02_AnimationTrack/03.png)

키프레임 찍힌 트랙에서 마우스 우클릭 후 [Convert To Clip Track]을 누르면 첫번째 키프레임부터 마지막 키프레임까지가 하나의 클립인 클립 트랙으로 변한다.

![04](/assets/img/blog/unity/2021/Timeline/02_AnimationTrack/04.png)

다시 Infinite Clip으로 돌아가고 싶다면 트랙에서 마우스 우클릭 후 [Convert To Infinite Clip]을 누르면 다시 키프레임으로 변환된다.

# ✂ 클립 편집하기

애니메이션 트랙에 등록된 애니메이션의 클립을 선택하면 다양한 설정을 할 수 있다. 간단하게 많이 사용할 것같은 설정들만 소개한다.

## 클립 수정

등록된 클립을 더블클릭하면 유니티 애니메이션 에디터창이 뜨게 되며 바로 수정이 가능하다.

![05](/assets/img/blog/unity/2021/Timeline/02_AnimationTrack/05.png)
애니메이션 에디터 창과 타임라인의 인디케이터가 동기화된 모습
{:.figure}

인디케이터가 동기화되어 타임라인이나 애니메이션창에서 인디케이터를 어느 한 쪽에서 움직이면 다른 한 쪽도 인디케이터가 함께 이동된다.

## 클립 설정(Inspector)

![06](/assets/img/blog/unity/2021/Timeline/02_AnimationTrack/06.png)

클립에는 다양한 설정들이 있다.

![07](/assets/img/blog/unity/2021/Timeline/02_AnimationTrack/07.png)

빨간 네모박스로 표시된 것들이 주로 사용하는 설정들이며, 클립의 시작 혹은 끝에 관여하는 설정들 위주로 설명하겠다.

### 클립 블렌딩

타임라인을 사용하는 의의라고도 할 수 있는 강력한 특징이다. 물론 클립들끼리 블렌딩이 불가능한 트랙도 존재하니 체크가 필요하다.

블렌딩은 간단하게 클립 둘을 겹치면 그 사이에 사선이 표기되며 표기된 구간동안 두 클립의 보간값을 반환한다. 애니메이터에서도 사용하는 방식이며 타임라인에서는 좀 더 시각적으로 잘 나타내 준다고 할 수 있다.

- Ease In/Out
Ease In/Out을 사용하면 클립 하나에 대한 보간도 가능하게 해준다. 인스펙터창에서 값을 조절하면 클립의 앞과 뒤에서 0과 클립에 대한 보간이 일어난다. 즉, 위에서 설명한 블렌딩이 Ease In/Out의 개념을 포함한다고 할 수 있다.

### Animation Extrapolation
클립이 끝난 뒤 빈 트랙을 만났을 때 어떤 동작을 할 것인지 선택할 수 있다.
1. Hold
: 기본으로 설정되는 옵션이다. 마지막 키프레임을 유지한다.
2. Loop
: 마지막 키프레임이 끝나면 첫번째 키프레임부터 다시 시작한다.
3. Ping Pong
: 마지막 키프레임이 끝나면 역재생하며, 다시 첫번째 키프레임을 만나면 다시 재생한다.
4. Continue
:  클립에 바인딩된 소스의 설정에 따라서 Hold하거나 Loop한다.

