---
layout: post
title: ê³µìš© ìŠ¤í¬ë¦½íŠ¸ ì œì‘ê¸°ğŸˆ09 - ì¸í’‹ ì‹œìŠ¤í…œ í¸
category: devlog
tags: [unity, CoreScript, Retrospective]
image: /assets/img/blog/unity/2025/CoreBanner09.png
description: >
  Unity í”„ë¡œì íŠ¸ì˜ ê³µìš©ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì œì‘í•˜ë©´ì„œ ì–´ë–»ê²Œ ë§Œë“¤ì—ˆëŠ”ì§€, ì–´ë–¤ ì ì— ì‹ ê²½ì¼ëŠ”ì§€ ì„¤ëª…í•˜ëŠ” ê¸€ì…ë‹ˆë‹¤.
comments: true
---

* this unordered seed list will be replaced by toc as unordered list
{:toc}

ê²Œì„ì„ ë§Œë“¤ ë•Œ ë¹¼ë†“ì„ ìˆ˜ ì—†ëŠ” ê²ƒì´ ë°”ë¡œ ì…ë ¥ ì‹œìŠ¤í…œì´ë‹¤. í‚¤ë³´ë“œ, ë§ˆìš°ìŠ¤, ê²Œì„íŒ¨ë“œ ë“± ë‹¤ì–‘í•œ ì…ë ¥ì„ í†µì¼ëœ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³ , ì…ë ¥ ì„¤ì •ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ì£¼ë©´ í¸ë¦¬í•˜ì§€ ì•Šì„ê¹Œ? Unityì˜ New Input Systemì„ í™œìš©í•˜ì—¬ `.inputactions` íŒŒì¼ë§Œ ìˆ˜ì •í•˜ë©´ ìë™ìœ¼ë¡œ ì½”ë“œê°€ ìƒì„±ë˜ê³ , ì´ë²¤íŠ¸ êµ¬ë… ë°©ì‹ìœ¼ë¡œ ê¹”ë”í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì…ë ¥ ì‹œìŠ¤í…œì„ ë§Œë“¤ì–´ë³´ì.

í•µì‹¬ì€ `.inputactions` íŒŒì¼ ìˆ˜ì • â†’ ìë™ ì½”ë“œ ìƒì„± â†’ ì´ë²¤íŠ¸ êµ¬ë…/ì§ì ‘ ì¡°íšŒ ë°©ì‹ì˜ ê°„í¸í•œ ì‚¬ìš©ì´ë‹¤.

# ğŸ’¡ì˜ˆì‹œ
ê°„ë‹¨í•˜ê²Œ ë¨¼ì € ì‚¬ìš© ì˜ˆì‹œë¶€í„° ì†Œê°œí•´ë³´ìë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

## ì´ë²¤íŠ¸ êµ¬ë… ë°©ì‹
```csharp
public class PlayerController : MonoBehaviour
{
    private void OnEnable()
    {
        // ì´ë™ ì…ë ¥ ì´ë²¤íŠ¸ êµ¬ë…
        InputManager.Instance.OnMove += HandleMove;

        // ì í”„ ì…ë ¥ ì´ë²¤íŠ¸ êµ¬ë…
        InputManager.Instance.OnJumpStarted += HandleJump;

        // ê³µê²© ì…ë ¥ ì´ë²¤íŠ¸ êµ¬ë…
        InputManager.Instance.OnAttackPerformed += HandleAttack;
    }

    private void OnDisable()
    {
        // ë°˜ë“œì‹œ êµ¬ë… í•´ì œ!
        if (InputManager.Instance != null)
        {
            InputManager.Instance.OnMove -= HandleMove;
            InputManager.Instance.OnJumpStarted -= HandleJump;
            InputManager.Instance.OnAttackPerformed -= HandleAttack;
        }
    }

    private void HandleMove(Vector2 input)
    {
        // ì´ë™ ì²˜ë¦¬
        transform.Translate(new Vector3(input.x, 0, input.y) * Time.deltaTime * 5f);
    }

    private void HandleJump()
    {
        // ì í”„ ì²˜ë¦¬
        Debug.Log("Jump!");
    }

    private void HandleAttack()
    {
        // ê³µê²© ì²˜ë¦¬
        Debug.Log("Attack!");
    }
}
```

## ì§ì ‘ ì¡°íšŒ ë°©ì‹
```csharp
public class PlayerMovement : MonoBehaviour
{
    private void Update()
    {
        // ì‹¤ì‹œê°„ ì…ë ¥ ê°’ ì½ê¸°
        Vector2 moveInput = InputManager.Instance.GetMoveInput();

        if (moveInput != Vector2.zero)
        {
            Vector3 movement = new Vector3(moveInput.x, 0, moveInput.y);
            transform.Translate(movement * 5f * Time.deltaTime);
        }

        // ë²„íŠ¼ ìƒíƒœ í™•ì¸
        if (InputManager.Instance.IsJumpPressed())
        {
            Jump();
        }
    }
}
```

## ì…ë ¥ ì œì–´
```csharp
public class PauseMenuUI : UIBase
{
    public override void OnShow()
    {
        base.OnShow();

        // í”Œë ˆì´ì–´ ì…ë ¥ ë¹„í™œì„±í™”, UI ì…ë ¥ í™œì„±í™”
        InputManager.Instance.DisablePlayerInput();
        InputManager.Instance.EnableUIInput();
    }

    public override void OnHide()
    {
        base.OnHide();

        // í”Œë ˆì´ì–´ ì…ë ¥ ì¬í™œì„±í™”, UI ì…ë ¥ ë¹„í™œì„±í™”
        InputManager.Instance.EnablePlayerInput();
        InputManager.Instance.DisableUIInput();
    }
}
```

# ğŸ“Š í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

```
InputManager (ì‹±ê¸€í†¤, partial class)
â”œâ”€ InputManager.cs (ìˆ˜ë™ ì‘ì„± ë¶€ë¶„)
â””â”€ InputManager.Generated.cs (ìë™ ìƒì„± ë¶€ë¶„)
   â”œâ”€ ì´ë²¤íŠ¸ ì„ ì–¸ (On{ActionName})
   â”œâ”€ ë°”ì¸ë”© ë©”ì„œë“œ (Bind{MapName}Actions)
   â””â”€ Get ë©”ì„œë“œ (Get{ActionName}Input)

InputActionCodeGenerator (ìë™ ìƒì„± ì—ë””í„° íˆ´)
InputActionsPostprocessor (íŒŒì¼ ë³€ê²½ ê°ì§€ ë° ìë™ ì¬ìƒì„±)
```

# ğŸ“ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
## í•µì‹¬ ì»´í¬ë„ŒíŠ¸
###### InputManager.cs (ìˆ˜ë™ ì‘ì„± ë¶€ë¶„)
- ì—­í• : ê°œë°œìê°€ ì§ì ‘ ì‘ì„±í•˜ëŠ” í•µì‹¬ ë¡œì§
- ì£¼ìš” ê¸°ëŠ¥:
  - InputSystem_Actions ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
  - Initialize()ì—ì„œ BindAllActions() í˜¸ì¶œ
  - Action Map ì œì–´ ë©”ì„œë“œ ì œê³µ
    - EnablePlayerInput() / DisablePlayerInput()
    - EnableUIInput() / DisableUIInput()
    - EnableAllInput() / DisableAllInput()
  - OnDestroy()ì—ì„œ ì •ë¦¬ ì‘ì—…

###### InputManager.Generated.cs (ìë™ ìƒì„± ë¶€ë¶„)
- ì—­í• : .inputactions íŒŒì¼ë¡œë¶€í„° ìë™ ìƒì„±ë˜ëŠ” ì½”ë“œ
- ì£¼ìš” ê¸°ëŠ¥:
  - ì´ë²¤íŠ¸ ì„ ì–¸
    - Vector2 íƒ€ì…: `event Action<Vector2> On{ActionName}`
    - Button íƒ€ì…: `event Action On{ActionName}Started/Performed/Canceled`
    - Vector3 íƒ€ì…: `event Action<Vector3> On{ActionName}`
    - Quaternion íƒ€ì…: `event Action<Quaternion> On{ActionName}`
  - ë°”ì¸ë”© ë©”ì„œë“œ
    - Bind{MapName}Actions(): ê° Action Mapì˜ ì•¡ì…˜ ë°”ì¸ë”©
    - BindAllActions(): ëª¨ë“  Action Map ë°”ì¸ë”© í˜¸ì¶œ
  - Get ë©”ì„œë“œ
    - Vector2: `Vector2 Get{ActionName}Input()`
    - Button: `bool Is{ActionName}Pressed()`
    - Vector3: `Vector3 Get{ActionName}Input()`
    - Quaternion: `Quaternion Get{ActionName}Input()`

###### InputActionCodeGenerator (ì—ë””í„° ì „ìš©)
- ì—­í• : .inputactions íŒŒì¼ì„ íŒŒì‹±í•˜ì—¬ C# ì½”ë“œ ìƒì„±
- ì£¼ìš” ê¸°ëŠ¥:
  - JSON íŒŒì‹± (JsonUtility.FromJson)
  - InputManager.Generated.cs ìƒì„±
  - ë©”ë‰´ ì œê³µ: `Tools > Input > Generate Input Manager Code`
- ì½”ë“œ ìƒì„± í”„ë¡œì„¸ìŠ¤:
  1. .inputactions íŒŒì¼ ì½ê¸°
  2. JSON íŒŒì‹± â†’ InputActionsData
  3. Action Mapë³„ ì´ë²¤íŠ¸ ì„ ì–¸ ìƒì„±
  4. Action Mapë³„ ë°”ì¸ë”© ë©”ì„œë“œ ìƒì„±
  5. BindAllActions ë©”ì„œë“œ ìƒì„±
  6. Action Mapë³„ Get ë©”ì„œë“œ ìƒì„±
  7. íŒŒì¼ ì €ì¥ ë° AssetDatabase.Refresh()

###### InputActionsPostprocessor (ì—ë””í„° ì „ìš©)
- ì—­í• : .inputactions íŒŒì¼ ë³€ê²½ ê°ì§€ ë° ìë™ ì¬ìƒì„±
- ì£¼ìš” ê¸°ëŠ¥:
  - AssetPostprocessor ìƒì†
  - OnPostprocessAllAssets()ì—ì„œ íŒŒì¼ ë³€ê²½ ê°ì§€
  - .inputactions íŒŒì¼ ìˆ˜ì • ì‹œ ìë™ìœ¼ë¡œ ì½”ë“œ ì¬ìƒì„±
- ë™ì‘ ë°©ì‹:
  - .inputactions íŒŒì¼ ì €ì¥ ì‹œ íŠ¸ë¦¬ê±°
  - InputActionCodeGenerator.GenerateCode() í˜¸ì¶œ


# ğŸ”„ ë°ì´í„° íë¦„

###### ê°œë°œ ë‹¨ê³„ (ì—ë””í„°)
1. `InputSystem_Actions.inputactions` íŒŒì¼ ìˆ˜ì •
   - Action Map ì¶”ê°€/ìˆ˜ì •
   - Action ì¶”ê°€/ìˆ˜ì •
   - Binding ì„¤ì •  
   â†“
1. íŒŒì¼ ì €ì¥ (Ctrl+S)  
   â†“
2. \[Unity] InputSystem_Actions.cs ìë™ ìƒì„±
3. \[InputActionsPostprocessor] íŒŒì¼ ë³€ê²½ ê°ì§€  
   â†“
4. \[InputActionCodeGenerator] JSON íŒŒì‹±
   - Action Map ë° Action ì •ë³´ ì¶”ì¶œ
   - Action íƒ€ì… í™•ì¸ (Vector2, Button, Vector3, Quaternion)  
   â†“
6. \[ì½”ë“œ ìƒì„±] InputManager.Generated.cs ìƒì„±:
   - ì´ë²¤íŠ¸ ì„ ì–¸ (`On{ActionName}`)
   - ë°”ì¸ë”© ë©”ì„œë“œ (`Bind{MapName}Actions()`)
   - BindAllActions ë©”ì„œë“œ
   - Get ë©”ì„œë“œ (`Get{ActionName}Input()`, `Is{ActionName}Pressed()`)  
   â†“
1. \[AssetDatabase.Refresh] Unity ë¦¬ì»´íŒŒì¼  
   â†“
2. \[ì™„ë£Œ] InputManagerì—ì„œ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥

###### ëŸ°íƒ€ì„ ë‹¨ê³„
1. \[ê²Œì„ ì‹œì‘] InputManager.Awake() í˜¸ì¶œ  
   â†“
2. \[Initialize] InputSystem_Actions ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
3. \[BindAllActions] ëª¨ë“  ì•¡ì…˜ ë°”ì¸ë”©:
   - BindPlayerActions()
   - BindUIActions()
   - ... (Action Mapë³„ ë°”ì¸ë”© ë©”ì„œë“œ í˜¸ì¶œ)  
   â†“
1. \[ê° ë°”ì¸ë”© ë©”ì„œë“œ] InputAction ì´ë²¤íŠ¸ êµ¬ë…  
   â†“
2. \[EnablePlayerInput] Player Action Map í™œì„±í™”  
   â†“
3. \[ì™„ë£Œ] ì…ë ¥ ì‹œìŠ¤í…œ ì‚¬ìš© ê°€ëŠ¥

###### ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬ í”„ë¡œì„¸ìŠ¤
1. \[í”Œë ˆì´ì–´ ì…ë ¥] í‚¤ë³´ë“œ/ë§ˆìš°ìŠ¤/ê²Œì„íŒ¨ë“œ ì…ë ¥  
   â†“
2. \[Unity Input System] InputAction íŠ¸ë¦¬ê±°
   - started / performed / canceled ë‹¨ê³„ë³„ í˜¸ì¶œ  
   â†“
3. \[InputManager ë°”ì¸ë”©] ì´ë²¤íŠ¸ ë°œí–‰:
   - `OnMove?.Invoke(input)` (Vector2)
   - `OnJumpStarted?.Invoke()` (Button)  
   â†“
4. \[êµ¬ë…ì] ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì‹¤í–‰:
   - `HandleMove(Vector2 input)`
   - `HandleJump()`  
   â†“
5. \[ì™„ë£Œ] ì…ë ¥ ì²˜ë¦¬ ì™„ë£Œ

###### Action Map ì œì–´ í”„ë¡œì„¸ìŠ¤
1. UI íŒì—… ì—´ë¦¼  
   â†“
2. `InputManager.Instance.DisablePlayerInput()`
   - `inputActions.Player.Disable()` í˜¸ì¶œ
   - Player ì…ë ¥ ë¹„í™œì„±í™”  
   â†“
3. `InputManager.Instance.EnableUIInput()`
   - `inputActions.UI.Enable()` í˜¸ì¶œ
   - UI ì…ë ¥ í™œì„±í™”  
   â†“
1. UI íŒì—… ë‹«í˜  
   â†“
2. `InputManager.Instance.EnablePlayerInput()`
3. `InputManager.Instance.DisableUIInput()`  
   â†“
4. \[ì™„ë£Œ] ì›ë˜ ì…ë ¥ ìƒíƒœë¡œ ë³µì›

# ğŸ¯ ì‹ ê²½ ì“´ ë¶€ë¶„

###### ìë™ ì¬ìƒì„± ì‹œìŠ¤í…œ
AssetPostprocessorë¥¼ í™œìš©í•œ ì™„ì „ ìë™í™”
```csharp
public class InputActionsPostprocessor : AssetPostprocessor
{
    private static void OnPostprocessAllAssets(
        string[] importedAssets, ...)
    {
        foreach (string assetPath in importedAssets)
        {
            if (assetPath.EndsWith(INPUT_ACTIONS_FILE))
            {
                // íŒŒì¼ ì™„ì „íˆ ì„í¬íŠ¸ë  ë•Œê¹Œì§€ ëŒ€ê¸° í›„ ì¬ìƒì„±
                EditorApplication.delayCall += () =>
                {
                    InputActionCodeGenerator.GenerateCode();
                };
                break;
            }
        }
    }
}
```
- EditorApplication.delayCallë¡œ Unityì˜ ì„í¬íŠ¸ í”„ë¡œì„¸ìŠ¤ ì™„ë£Œ ëŒ€ê¸°
- ê°œë°œìëŠ” íŒŒì¼ë§Œ ì €ì¥í•˜ë©´ ìë™ìœ¼ë¡œ ì½”ë“œ ìƒì„±
- ìˆ˜ë™ ë©”ë‰´ ì‹¤í–‰ ë¶ˆí•„ìš”

###### ì´ë²¤íŠ¸ì™€ Get ë©”ì„œë“œ ë³‘í–‰ ì§€ì›
ë‘ ê°€ì§€ ì‚¬ìš© ë°©ì‹ ëª¨ë‘ ì§€ì›í•˜ì—¬ ìœ ì—°ì„± ì œê³µ
```csharp
// ì´ë²¤íŠ¸ ë°©ì‹ (ê¶Œì¥)
InputManager.Instance.OnMove += HandleMove;

// Get ë°©ì‹ (ì‹¤ì‹œê°„ ì¡°íšŒ)
Vector2 input = InputManager.Instance.GetMoveInput();
```
- ì´ë²¤íŠ¸ ë°©ì‹: ì…ë ¥ ë³€ê²½ ì‹œì—ë§Œ í˜¸ì¶œ (íš¨ìœ¨ì )
- Get ë°©ì‹: Update()ì—ì„œ ë§¤ í”„ë ˆì„ ì¡°íšŒ (ê°„í¸)
- ìƒí™©ì— ë§ê²Œ ì„ íƒ ê°€ëŠ¥

###### Action Mapë³„ ì…ë ¥ ì œì–´
Player, UI ë“± Action Mapë³„ë¡œ ë…ë¦½ì ì¸ í™œì„±í™”/ë¹„í™œì„±í™”
```csharp
// í”Œë ˆì´ì–´ ì…ë ¥ë§Œ ë¹„í™œì„±í™”
InputManager.Instance.DisablePlayerInput();

// UI ì…ë ¥ë§Œ í™œì„±í™”
InputManager.Instance.EnableUIInput();

// ëª¨ë“  ì…ë ¥ ë¹„í™œì„±í™” (ì»·ì”¬ ë“±)
InputManager.Instance.DisableAllInput();
```
- ìƒí™©ë³„ë¡œ í•„ìš”í•œ ì…ë ¥ë§Œ í™œì„±í™”
- UI íŒì—… ì‹œ í”Œë ˆì´ì–´ ì…ë ¥ ì°¨ë‹¨
- ì»·ì”¬ ì¬ìƒ ì‹œ ëª¨ë“  ì…ë ¥ ì°¨ë‹¨


---
# ê²°ë¡ 
Unityì˜ New Input Systemì„ í™œìš©í•˜ì—¬ ìë™ ì½”ë“œ ìƒì„± ê¸°ë°˜ ì…ë ¥ ì‹œìŠ¤í…œì„ ë§Œë“¤ì–´ë´¤ë‹¤. `.inputactions` íŒŒì¼ë§Œ ìˆ˜ì •í•˜ë©´ ì½”ë“œê°€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ê³ , ì´ë²¤íŠ¸ êµ¬ë… ë°©ì‹ìœ¼ë¡œ ê¹”ë”í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ í¸ë¦¬í•˜ë‹¤. AssetPostprocessorë¡œ ì™„ì „ ìë™í™”í•œ ì ì´ í•µì‹¬.
